cmake_minimum_required(VERSION 2.8.3)
project(beginner_tutorials)

#find_package(catkin REQUIRED COMPONENTS roscpp rospy std_msgs genmsg)


find_package(catkin REQUIRED COMPONENTS
  cv_bridge
  image_transport
  roscpp
  sensor_msgs
  std_msgs
)


catkin_package()


set(TARGET_ARCH_DIR armeabi-v7a)


get_filename_component(MV_ROOT_DIR "${CMAKE_CURRENT_LIST_DIR}/../../../3rdlib/mv" ABSOLUTE)
get_filename_component(PROJECT_ROOT_DIR "${CMAKE_CURRENT_LIST_DIR}/../../" ABSOLUTE)

message( STATUS "PROJECT_ROOT_DIR ... " ${PROJECT_ROOT_DIR})


include_directories("${MV_ROOT_DIR}/inc")
include_directories("${MV_ROOT_DIR}/ext/apq8074/inc")

include_directories("${PROJECT_ROOT_DIR}/FRAMEWORK")
include_directories("${PROJECT_ROOT_DIR}/VSLAM")
include_directories("${PROJECT_ROOT_DIR}/DFS")
include_directories("${PROJECT_ROOT_DIR}/AE")
include_directories("${PROJECT_ROOT_DIR}/2DMAP")
include_directories("${PROJECT_ROOT_DIR}/SF")

include_directories(include ${catkin_INCLUDE_DIRS})


link_directories(${MV_ROOT_DIR}/ext/apq8074/lib)
#file(GLOB QROBOT_SRC ${PROJECT_ROOT_DIR}/src/MASTER/MASTER_ROS_MV_QROBOT_TASK.cpp ${PROJECT_ROOT_DIR}/src/VSLAM/ReadImages.cpp  ${MV_ROOT_DIR}/ext/apq8074/src/EagleCamera.cpp)

file(GLOB QROBOT_SRC ${PROJECT_ROOT_DIR}/src/MASTER/MASTER_ROS_MV_QROBOT_TASK.cpp)
set(QROBOT_TARGET_NAME QROBOT_MASTER_ROSNODE)
add_executable(${QROBOT_TARGET_NAME} ${QROBOT_SRC})
target_link_libraries(${QROBOT_TARGET_NAME} ${catkin_LIBRARIES})
add_library(mv SHARED IMPORTED)
set_property(TARGET mv PROPERTY IMPORTED_LOCATION ${MV_ROOT_DIR}/bin/lin/${TARGET_ARCH_DIR}/libmv.so)
target_link_libraries(${QROBOT_TARGET_NAME} mv)
target_link_libraries(${QROBOT_TARGET_NAME} pthread)
target_link_libraries(${QROBOT_TARGET_NAME} adsprpc)
target_link_libraries(${QROBOT_TARGET_NAME} ${MV_ROOT_DIR}/ext/apq8074/lib/rpcmem.a)
target_link_libraries(${QROBOT_TARGET_NAME} camera)
target_link_libraries(${QROBOT_TARGET_NAME} camparams)
set_target_properties(${QROBOT_TARGET_NAME} PROPERTIES COMPILE_FLAGS "-std=c++11" )

